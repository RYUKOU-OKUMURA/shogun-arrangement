# Director → Captain command queue
# Director writes commands here, Captain reads

command:
  id: cmd_007
  timestamp: "2026-02-03T15:05:00"
  description: "cmd_005の進捗確認と統合レポート作成"
  type: docs
  status: in_progress

  # AI駆動開発メタデータ
  small_pr: false
  tdd_required: false

  subtasks:
    - id: subtask_007_1
      description: "全プレイヤーの進捗を確認し、統合レポートを作成"
      assigned_to: captain
      goal: "全タスク完了後に統合レポートをdirector/reports/に作成"
      type: docs

      context: |
        - 対象コマンド：cmd_005（整体院DX化リサーチ）
        - 確認項目：
          - 各プレイヤーのYAMLステータス（completed/done確認）
          - レポートファイルの存在確認（docs/reports/）
          - レポートの品質チェック
        - 全員完了時のアクション：
          - 各レポートの内容を要約・統合
          - 統合レポートをdirector/reports/に作成
          - ファイル名：整体院生成AI_DX化統合レポート.md
          - ディレクターに完了報告（tmux send-keys）
        - 未完了プレイヤーがいる場合：
          - 促促の通知を送る
          - 10-20秒ごとに進捗を確認
          - 全員完了まで監視を継続

      output_location: "director/reports/"
      output_format: "markdown"
      output_filename: "整体院生成AI_DX化統合レポート.md"

      quality_gates:
        - all_players_completed: true
        - comprehensive_summary: true
        - actionable_insights: true

command:
  id: cmd_006
  timestamp: "2026-02-03T14:57:00"
  description: "cmd_005の進捗確認：Player 2のタスク完了を促進"
  type: docs
  status: in_progress

  # AI駆動開発メタデータ
  small_pr: false
  tdd_required: false

  subtasks:
    - id: subtask_006_1
      description: "Player 2の進捗を確認し、タスク完了を促進"
      assigned_to: captain
      goal: "Player 2がタスクを完了できるように支援"
      type: docs

      context: |
        - 現状：Player 1,3,4,5は完了、Player 2のみin_progress
        - Player 2のタスク：2026年のAIトレンドと整体院業界への影響調査
        - 期待する出力：docs/reports/player2_ai_trends_analysis.md
        - アクション：
          - Player 2の状況を確認
          - 必要に応じてガイダンスや支援を提供
          - 全員完了次第、ディレクターに報告

      output_location: "docs/reports/"
      output_format: "markdown"
      output_filename: "player2_ai_trends_analysis.md"

      quality_gates:
        - comprehensive: true
        - sources_cited: true
        - case_studies: true

command:
  id: cmd_005
  timestamp: "2026-02-03T10:30:00"
  description: "整体院に生成AIを活用したDX化が必要な理由や根拠をリサーチし、レポートを作成"
  type: docs
  status: in_progress

  # AI駆動開発メタデータ
  small_pr: false
  tdd_required: false

  subtasks:
    # サブタスク1: 業界動向と市場分析
    - id: subtask_005_1
      description: "整体院業界の現状と課題を調査（市場規模・後継者問題・DX化遅れ）"
      assigned_to: player1
      goal: "業界の構造的課題と市場環境を明確化"
      type: docs

      context: |
        - 調査テーマ：整体院・整骨院業界の現状分析
        - 調査項目：
          - 市場規模の推移（縮小傾向のデータ）
          - 後継者不足の実態
          - 業界のDX化遅れ
          - 2026年の業界予測（二極化・専門店化）
        - 参考リソース：業界レポート、M&A事例、市場調査
        - 期待する成果：データに基づく客観的な業界分析

      output_location: "docs/reports/"
      output_format: "markdown"
      output_filename: "player1_industry_analysis.md"

      quality_gates:
        - comprehensive: true
        - sources_cited: true
        - data_driven: true

    # サブタスク2: 生成AI・DXトレンド調査
    - id: subtask_005_2
      description: "2026年のAIトレンドと整体院業界への影響を調査"
      assigned_to: player2
      goal: "AIトレンドと業界影響を分析"
      type: docs

      context: |
        - 調査テーマ：2026年の生成AIトレンド
        - 調査項目：
          - AIの「インフラ化」への移行
          - マルチエージェントAIの台頭
          - LLMO（AI検索）対策の重要性
          - Small LLMによるコスト最適化
        - 業界への影響：
          - 施術業界でのAI活用事例
          - 予約管理・問診・集客の自動化
          - 待ち時間削減・満足度向上の実証データ
        - 参考リソース：AIトレンドレポート、導入事例

      output_location: "docs/reports/"
      output_format: "markdown"
      output_filename: "player2_ai_trends_analysis.md"

      quality_gates:
        - comprehensive: true
        - sources_cited: true
        - case_studies: true

    # サブタスク3: 具体的な導入事例と効果調査
    - id: subtask_005_3
      description: "整体院でのAI導入事例と効果（待ち時間削減・業務効率化等）を調査"
      assigned_to: player3
      goal: "具体的な導入事例と定量的効果を収集"
      type: docs

      context: |
        - 調査テーマ：整体院・施術業界のAI導入事例
        - 調査項目：
          - AI予約システムの効果（待ち時間66%削減等のデータ）
          - オンライン問診導入による業務効率化
          - AIチャットボットによるカスタマーサポート改善
          - 業務時間削減の実例（年間1,800時間等）
        - ツール・サービス：
          - カロネード、ワンモアハンド、リピクル等
          - SokutoAI等のAIチャットボット
        - 期待する成果：具体的な数値データと事例

      output_location: "docs/reports/"
      output_format: "markdown"
      output_filename: "player3_implementation_cases.md"

      quality_gates:
        - comprehensive: true
        - sources_cited: true
        - quantitative_data: true

    # サブタスク4: Googleビジネスプロフィールと集客調査
    - id: subtask_005_4
      description: "GoogleビジネスプロフィールとLLMO対策による集客効果を調査"
      assigned_to: player4
      goal: "デジタル集客の重要性と具体的対策を明確化"
      type: docs

      context: |
        - 調査テーマ：GoogleビジネスプロフィールとAI検索対策
        - 調査項目：
          - MEO対策の基本と効果
          - LLMO（AI検索）時代の集客戦略
          - 口コミ獲得の重要性とAI活用
          - Googleマップでの集客成功事例
        - 整体院向けの具体的対策：
          - プロフィール最適化
          - 口コミ促進
          - AIに選ばれるための情報発信
        - 参考リソース：MEO対策ガイド、集客事例

      output_location: "docs/reports/"
      output_format: "markdown"
      output_filename: "player4_customer_acquisition.md"

      quality_gates:
        - comprehensive: true
        - sources_cited: true
        - actionable_recommendations: true

    # サブタスク5: 支援制度と導入ロードマップ
    - id: subtask_005_5
      description: "IT導入補助金等の支援制度とDX化ロードマップを調査"
      assigned_to: player5
      goal: "コスト削減策と実践的導入手順を提示"
      type: docs

      context: |
        - 調査テーマ：DX化支援制度と実践手順
        - 調査項目：
          - IT導入補助金（2026年版）
          - その他DX推進補助金
          - Small LLM等の低コスト導入方法
          - Googleツールによる低コストDX
        - DX化ロードマップ：
          - 現状分析
          - 優先順位設定（予約・問診・集客）
          - ツール選定
          - トライアル導入
          - 本格展開
          - 効果測定・改善
        - 期待する成果：具体的なアクションプラン

      output_location: "docs/reports/"
      output_format: "markdown"
      output_filename: "player5_funding_roadmap.md"

      quality_gates:
        - comprehensive: true
        - sources_cited: true
        - actionable_roadmap: true

command:
  id: cmd_008
  timestamp: "2026-02-03T19:20:00"
  description: "9フェーズAI駆動開発フローのシステム統合を実装"
  type: feature
  status: pending

  # AI駆動開発メタデータ
  small_pr: true
  tdd_required: true

  subtasks:
    # タスク1: 品質ゲート自動化スクリプトの実装
    - id: subtask_008_001
      description: "品質ゲート自動化スクリプトを実装"
      assigned_to: player1
      goal: "全品質ゲートがnpm経由で実行可能になる"
      type: feature

      context: |
        - 言語：TypeScript
        - フレームワーク：Node.js
        - 目的：品質ゲートの自動化
        - 実装するスクリプト：
          - scripts/quality-gates/validate-quality-gates.ts
          - scripts/quality-gates/check-pr-size.ts
          - scripts/quality-gates/check-coverage.ts
          - scripts/quality-gates/check-security.ts
        - 既存のスクリプトを参考：package.jsonのscriptsセクション
        - 期待される動作：
          - npm run quality-gatesで全ての品質ゲートを実行
          - 各品質ゲートは個別にも実行可能
          - エラー時は適切な終了コードを返す
        - エッジケース：
          - カバレッジが80%未満の場合
          - ESLintエラーがある場合
          - TypeScriptエラーがある場合
          - PRサイズが200行を超える場合
        - 関連ファイル：
          - package.json（scriptsセクション）
          - jest.config.js
          - tsconfig.json
          - .eslintrc.json

      output_location: "scripts/quality-gates/"
      output_format: "typescript"

      quality_gates:
        - lint: required
        - typecheck: required
        - test_coverage: 80%
        - max_lines: 200

    # タスク2: メトリクス追跡システムの実装
    - id: subtask_008_002
      description: "メトリクス追跡システムを実装"
      assigned_to: player2
      goal: "dashboard.mdが自動更新される"
      type: feature
      depends_on: subtask_008_001

      context: |
        - 言語：TypeScript
        - 目的：メトリクスの自動収集とdashboard.mdの更新
        - 実装する機能：
          - src/metrics/collector.ts（メトリクス収集）
          - src/metrics/report-generator.ts（レポート生成）
          - src/metrics/cli-dashboard.ts（CLIダッシュボード）
          - src/metrics/anomaly-detector.ts（異常検出）
        - 追跡するメトリクス：
          - レビュー待ち時間
          - PRライフサイクル
          - テストカバレッジ
          - 不安定なテスト率
          - PRあたりの行数
        - 期待される動作：
          - npm run metrics:dashboardで現在のメトリクスを表示
          - npm run metrics:report:weeklyで週次レポートを生成
          - npm run metrics:check-anomaliesで異常を検出
        - 関連ファイル：
          - dashboard.md（更新対象）

      output_location: "src/metrics/"
      output_format: "typescript"

      quality_gates:
        - lint: required
        - typecheck: required
        - test: must_pass

    # タスク3: CI/CDパイプライン設定の実装
    - id: subtask_008_003
      description: "CI/CDパイプライン設定を実装"
      assigned_to: player3
      goal: "GitHub Actionsで品質ゲートが自動実行される"
      type: feature

      context: |
        - 目的：CI/CDパイプラインの設定
        - 実装するファイル：
          - .github/workflows/quality-gates.yml（PR時の品質チェック）
          - .github/workflows/ci.yml（CIパイプライン）
          - .husky/pre-commit（プリコミットフック）
          - .husky/pre-push（プッシュフック）
        - 期待される動作：
          - PR作成時に自動で品質ゲートを実行
          - Fail時はマージをブロック
          - プリコミットで自動フォーマット
        - 品質ゲート：
          - lint
          - typecheck
          - test
          - test:coverage
          - check:pr-size
        - 関連ファイル：
          - package.json
          - .eslintrc.json
          - .prettierrc.json
          - lint-staged設定

      output_location: ".github/workflows/"
      output_format: "yaml"

      quality_gates:
        - lint: required
        - typecheck: required
        - comprehensive: true

    # タスク4: 9フェーズ開発フローの統合テスト
    - id: subtask_008_004
      description: "9フェーズ開発フローの統合テストを実装"
      assigned_to: player4
      goal: "9フェーズ開発フローが正常に動作することを確認"
      type: test
      depends_on: [subtask_008_001, subtask_008_002, subtask_008_003]

      context: |
        - 言語：TypeScript
        - テストフレームワーク：Jest
        - 目的：9フェーズ開発フローの統合テスト
        - テスト内容：
          - Phase 1-5（ディレクター）のワークフロー
          - Phase 6-7（キャプテン）のワークフロー
          - Phase 8-9（プレイヤー）のワークフロー
          - YAML通信プロトコル
          - send-keys通知プロトコル
        - 期待される動作：
          - 全てのフェーズが正しく連携する
          - YAMLファイルが正しく更新される
          - 通知が正しく送信される
        - テストカバレッジ：80%以上
        - AAAパターンを使用

      output_location: "src/__tests__/integration/phase-workflow.test.ts"
      output_format: "typescript"

      quality_gates:
        - lint: required
        - typecheck: required
        - test_coverage: 80%

    # タスク5: ドキュメント更新
    - id: subtask_008_005
      description: "READMEとセットアップガイドを更新"
      assigned_to: player5
      goal: "9フェーズ開発フローの使用方法が明確になる"
      type: docs
      depends_on: [subtask_008_001, subtask_008_002, subtask_008_003]

      context: |
        - 目的：ドキュメントの更新
        - 更新するファイル：
          - README.md（9フェーズ開発フローの説明を追加）
          - SETUP.md（9フェーズ開発フローの使用方法を追加）
          - docs/QUICK_START.md（クイックスタートガイドを新規作成）
        - 記載する内容：
          - 9フェーズ開発フローの概要
          - 各フェーズの目的とチェックリスト
          - ADRの参照方法
          - 品質ゲートの実行方法
          - CI/CDパイプラインの使用方法
        - 期待される動作：
          - 新メンバーでも9フェーズ開発フローを理解できる
          - 既存メンバーも参照できる

      output_location: "docs/"
      output_format: "markdown"
      output_filename: "QUICK_START.md"

      quality_gates:
        - comprehensive: true
        - sources_cited: true

  # 品質基準（全体）
  quality_standards:
    test_coverage: 80%
    lint: required
    typecheck: required
    max_pr_lines: 200
    tdd_required: true

  # 依存関係の要約
  dependencies:
    - player1の品質ゲートスクリプトが完了したら、player2とplayer3が並列で開始可能
    - player2とplayer3が完了したら、player4が統合テストを開始
    - player4が完了したら、player5がドキュメントを更新
