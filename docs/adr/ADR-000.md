# ADR-000: Architecture Decision Records (ADR) の採用

## 日付
2026-02-03

## ステータス
承認済み

## コンテキスト（背景・課題）

### 問題
- チーム内で過去の設計判断の背景が失われている
- 新メンバーのオンボーディングに時間がかかる
- 「なぜこうなってるの？」という質問に答えられないことが多い
- 同じ失敗を繰り返している可能性がある

### 技術的背景
- ソフトウェアアーキテクチャの第二法則：**「Why」は「How」より重要**
- 人は異動・退職する。知識は形式知化する必要がある
- AI駆動開発では、AIに過去の決定を伝える必要がある

### ビジネス的背景
- チームの成長に伴い、新メンバーが増加している
- プロジェクトの複雑性が増している
- 意思決定の透明性が求められている

## 決定（What We Will Do）

**Architecture Decision Records (ADR) の形式とプロセスを採用する。**

具体的には：

1. **ADRの配置場所**: `/docs/adr/` ディレクトリ
2. **命名規則**: `ADR-XXX: 短い名詞句のタイトル`
3. **バージョン管理**: Gitで管理（変更履歴を追跡）
4. **不変性**: 承認後のADRは基本的に変更しない（新しいADRで置き換え）
5. **レビュープロセス**: PRでレビュー、チームで議論してから承認

## 検討した代替案

### 選択肢A: 従来通りコードコメントのみで記録
- **メリット**:
  - 手軽に書ける
  - コードと隣接している
- **デメリット**:
  - 意思決定の全体像が見えない
  - 歴史的経緯が追いにくい
  - AIが参照しにくい

### 選択肢B: WikiやNotionで管理
- **メリット**:
  - 誰でも編集できる
  - リッチなフォーマットが使える
- **デメリット**:
  - コードとの同期が取りにくい
  - バージョン管理が不透明
  - PRレビューと連携しにくい

### 選択肢C: ADR形式でGit管理（採用）
- **メリット**:
  - コードと同じリポジトリで管理
  - バージョン管理が明確
  - PRレビューと連携できる
  - AIが参照しやすい
- **デメリット**:
  - 学習コストがかかる
  - 初期セットアップが必要

## 結果（Consequences）

### ポジティブな結果

- **知識の保存**: 設計判断の背景が永続的に記録される
- **オンボーディングの効率化**: 新メンバーが過去の決定を理解しやすくなる
- **AI駆動開発の強化**: AIにADRをコンテキストとして渡せる
- **意思決定の透明性**: 選択肢、トレードオフが明確になる
- **再発防止**: 同じ失敗を繰り返さなくなる

### ネガティブな結果

- **初期コスト**: ADRを書く習慣を身につける必要がある
- **メンテナンス**: 過去のADRが陳腐化していないか定期的に見直す必要がある
- **過剰文書化のリスク**: 小さな決定までADRにすると管理コストが増大する

### 中立的な結果

- ファイル数が増える（/docs/adr/ 以下）
- PRの説明がADRへの参照になる

## ADRの基本構造

以降のADRは以下の構造に従う：

```markdown
# ADR-XXX: [短い名詞句のタイトル]

## 日付
YYYY-MM-DD

## ステータス
提案中 / 承認済み / 却下 / 非推奨 / 置き換え済み

## コンテキスト（背景・課題）
どのような問題・課題があったのか？
技術的、ビジネス的、社会的な要因は何か？
中立的な事実を記述する

## 決定（What We Will Do）
どの選択肢を採用するか
能動態で明確に記述：「我々は〜を採用する」

## 検討した代替案
- 選択肢A：メリット / デメリット
- 選択肢B：メリット / デメリット
- 選択肢C：メリット / デメリット

## 結果（Consequences）
この決定により何が起こるか？
ポジティブな結果、ネガティブな結果、中立的な結果すべて記載
技術的、運用的、ビジネス的な影響

## 信頼度（オプション）
この決定に対する確信度（低/中/高）
低い場合は将来の再検討の可能性を示唆
```

## ADR運用ガイドライン

### ADRを作成すべき時

- アーキテクチャに大きな影響を与える決定（技術スタック選定、データベース選択等）
- 非機能要件に関わる決定（セキュリティ、可用性、スケーラビリティ等）
- 複数の選択肢があり、トレードオフを検討した結果の決定
- 将来のメンバーが「なぜ？」と疑問に思いそうな決定

### ADRを作成しなくて良い時

- リスク・コスト・スコープが限定的な決定
- すでに標準やポリシーで定められている決定
- 一時的な回避策、PoC、実験的なもの
- 単一開発者の範囲で完結する小さな変更

### AI駆動開発でのADR活用

- AIに実装を依頼する際、関連ADRを必ずコンテキストに含める
- 「ADR-005に基づいて実装して」と明示
- AIが生成したコードがADRに準拠しているか確認

## 信頼度
高

ADRは広く採用されているベストプラクティスであり、多くの組織で成功しています。
